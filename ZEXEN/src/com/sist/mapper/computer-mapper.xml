<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sist.mapper.computer-mapper">
  <!-- 1. 데이터 삽입 -->
  <insert id="computerInsert" parameterType="ComputerVO">
   INSERT INTO computer_tb VALUES(
     (SELECT NVL(MAX(com_no)+1,1) FROM Computer_TB),
     #{cate_no},
     #{product},
     #{spec},
     #{image},
     #{quantity},
     #{cost},
     #{gift},
     #{sell_cnt},
     #{stock_cnt},
     #{hit}
   )
  </insert>
  
  <!-- 2. 리스트 출력 -->
  <select id="computerListData" resultType="ComputerVO" parameterType="hashmap">
    SELECT com_no,cate_no,product,cost,num
    FROM (SELECT com_no,cate_no,product,cost,rownum as num
    FROM (SELECT com_no,cate_no,product,cost
    FROM computer_tb WHERE cate_no=#{cate_no} ORDER BY com_no DESC))
    WHERE num BETWEEN #{start} AND #{end}
  </select>
  
  <!-- 3. 카테고리 번호 -->
  <select id="computerCategoryCount" resultType="int" parameterType="int">
	SELECT COUNT(*) 
    FROM computer_tb WHERE ROWID IN(SELECT MAX(ROWID) 
    FROM computer_tb WHERE cate_no=#{cate_no} GROUP BY product)
  </select>
  
  <select id="computerDetailData" resultType="ComputerVO" parameterType="int">
	SELECT com_no,product,spec,image,cost,gift FROM computer_tb
	where com_no=#{com_no}
  </select>

</mapper>
